<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailwind CSS â‡„ CSS è½¬æ¢å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        .result-item {
            transition: all 0.2s ease;
        }
        .result-item:hover {
            transform: translateX(4px);
        }
        .copy-btn {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .result-item:hover .copy-btn {
            opacity: 1;
        }
        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            animation: fadeIn 0.2s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-12 fade-in">
            <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3">
                Tailwind CSS Translator
            </h1>
            <p class="text-gray-600 text-lg">åŒå‘è½¬æ¢ Tailwind CSS ç±»åä¸åŸç”Ÿ CSS æ ·å¼</p>
        </header>

        <!-- Search Box -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-8 fade-in">
            <div class="relative">
                <textarea 
                    id="searchInput" 
                    placeholder="è¾“å…¥ Tailwind ç±»å (å¦‚: bg-blue-500) æˆ– CSS å±æ€§ (å¦‚: background-color) è¿›è¡Œæœç´¢" 
                    class="w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none transition-colors resize-y min-h-[220px]"
                    rows="2"
                    autocomplete="off"
                ></textarea>
                <div class="absolute right-4 top-4 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>
            
            <!-- Mode Selector -->
            <div class="flex items-center gap-4 mt-4">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="searchMode" value="search" checked class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">æœç´¢æ¨¡å¼</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="searchMode" value="tailwind-to-css" class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">Tailwindè½¬CSS</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" name="searchMode" value="convert" class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">CSSè½¬Tailwind</span>
                </label>
            </div>
            
            <!-- Stats -->
            <div class="flex items-center justify-between mt-3 text-sm text-gray-500">
                <span id="statsInfo">åŠ è½½ä¸­...</span>
                <span id="resultCount" class="font-semibold"></span>
            </div>
        </div>

        <!-- Results -->
        <div id="resultsContainer" class="space-y-3">
            <!-- Welcome message -->
            <div id="welcomeMessage" class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">å¼€å§‹æœç´¢æˆ–è½¬æ¢</h3>
                <p class="text-gray-600 mb-4">åœ¨ä¸Šæ–¹è¾“å…¥æ¡†ä¸­è¾“å…¥ Tailwind ç±»åæˆ– CSS å±æ€§æ¥æŸ¥æ‰¾å¯¹åº”çš„è½¬æ¢ç»“æœ</p>
                <p class="text-sm text-gray-500 mb-6">ğŸ’¡ åˆ‡æ¢åˆ°"Tailwindè½¬CSS"å¯ä»¥å°†å¤šä¸ªTailwindç±»åè½¬æ¢ä¸ºCSSæ ·å¼<br>ğŸ’¡ åˆ‡æ¢åˆ°"CSSè½¬Tailwind"å¯ä»¥å°†CSSæ ·å¼è½¬æ¢ä¸ºTailwindç±»å</p>
                
                <div class="space-y-4">
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">æœç´¢æ¨¡å¼ç¤ºä¾‹</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button onclick="document.getElementById('searchInput').value='bg-blue-500'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm">
                                bg-blue-500
                            </button>
                            <button onclick="document.getElementById('searchInput').value='flex'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm">
                                flex
                            </button>
                            <button onclick="document.getElementById('searchInput').value='text-center'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm">
                                text-center
                            </button>
                            <button onclick="document.getElementById('searchInput').value='margin'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                margin
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">Tailwindè½¬CSSç¤ºä¾‹</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button onclick="document.querySelectorAll('input[name=searchMode]')[1].checked=true; document.getElementById('searchInput').value='px-4 py-2 bg-pink-100'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                è¯•è¯•Tailwindè½¬CSS
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">CSSè½¬Tailwindç¤ºä¾‹</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button onclick="document.querySelectorAll('input[name=searchMode]')[2].checked=true; document.getElementById('searchInput').value='background-color: blue;\\npadding: 1rem;\\nmargin: 0.5rem;'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                    class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm">
                                è¯•è¯•CSSè½¬Tailwind
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>Made with â¤ï¸ using Tailwind CSS</p>
        </footer>
    </div>

    <script>
        let tailwindData = {};
        let cssToTailwindMap = {};
        let isLoading = true;

        // Load JSON data
        async function loadData() {
            try {
                const response = await fetch('tailwind-classes-style-map.json');
                tailwindData = await response.json();
                
                // Build reverse mapping (CSS -> Tailwind)
                for (const [tailwindClass, cssStyle] of Object.entries(tailwindData)) {
                    const normalized = normalizeCssStyle(cssStyle);
                    if (!cssToTailwindMap[normalized]) {
                        cssToTailwindMap[normalized] = [];
                    }
                    cssToTailwindMap[normalized].push(tailwindClass);
                }
                
                const count = Object.keys(tailwindData).length;
                document.getElementById('statsInfo').textContent = `å·²åŠ è½½ ${count.toLocaleString()} æ¡ Tailwind ç±»æ˜ å°„`;
                isLoading = false;
            } catch (error) {
                document.getElementById('statsInfo').textContent = 'åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•';
                console.error('Error loading data:', error);
            }
        }

        // Normalize CSS style for comparison
        function normalizeCssStyle(css) {
            return css
                .toLowerCase()
                .replace(/\s+/g, ' ')
                .replace(/\/\*.*?\*\//g, '')
                .trim();
        }

        // Get current mode
        function getCurrentMode() {
            const modeRadio = document.querySelector('input[name="searchMode"]:checked');
            return modeRadio ? modeRadio.value : 'search';
        }

        // Main processing function
        function processInput(input) {
            if (!input.trim() || isLoading) {
                showWelcomeMessage();
                return;
            }

            const mode = getCurrentMode();
            if (mode === 'convert') {
                convertCssToTailwind(input);
            } else if (mode === 'tailwind-to-css') {
                convertTailwindToCSS(input);
            } else {
                search(input);
            }
        }

        // Search function
        function search(query) {
            const results = [];
            const lowerQuery = query.toLowerCase().trim();

            // Search in both keys and values
            for (const [tailwindClass, cssStyle] of Object.entries(tailwindData)) {
                const matchScore = getMatchScore(lowerQuery, tailwindClass, cssStyle);
                if (matchScore > 0) {
                    results.push({ tailwindClass, cssStyle, score: matchScore });
                }
            }

            // Sort by score (higher is better)
            results.sort((a, b) => b.score - a.score);

            // Limit results to top 100 for performance
            const limitedResults = results.slice(0, 100);
            displayResults(limitedResults, query);
        }

        // Convert Tailwind to CSS
        function convertTailwindToCSS(tailwindInput) {
            // Split by whitespace and filter out empty strings
            const tailwindClasses = tailwindInput.trim().split(/\s+/).filter(c => c.length > 0);
            const conversions = [];

            for (const twClass of tailwindClasses) {
                // First try exact match
                let cssStyle = tailwindData[twClass];
                
                // If no exact match, try template matching
                if (!cssStyle) {
                    const templateMatch = findTemplateMatch(twClass);
                    if (templateMatch) {
                        cssStyle = templateMatch;
                    }
                }
                
                conversions.push({
                    tailwindClass: twClass,
                    cssStyle: cssStyle || null
                });
            }

            displayTailwindToCssResults(conversions, tailwindClasses);
        }

        // Find template match for a Tailwind class
        function findTemplateMatch(twClass) {
            // Try to match against template patterns in tailwindData
            for (const [template, cssTemplate] of Object.entries(tailwindData)) {
                // Check if template contains placeholders
                if (template.includes('<') && template.includes('>')) {
                    const regex = templateToRegex(template);
                    const match = twClass.match(regex);
                    
                    if (match) {
                        // Extract the values from the match
                        const values = extractValues(template, twClass, match);
                        
                        // Replace placeholders in CSS template
                        let result = cssTemplate;
                        for (const [placeholder, value] of Object.entries(values)) {
                            result = result.replace(new RegExp(placeholder.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), value);
                        }
                        
                        return result;
                    }
                }
            }
            
            return null;
        }

        // Convert template pattern to regex
        function templateToRegex(template) {
            // Escape special regex characters except < and >
            let pattern = template.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
            
            // Replace common placeholders with regex patterns
            pattern = pattern.replace(/<number>/g, '(\\d+(?:\\.\\d+)?)');
            pattern = pattern.replace(/<ratio>/g, '([\\d\\.]+(?:\\/[\\d\\.]+)?)');
            pattern = pattern.replace(/<value>/g, '(.+?)');
            pattern = pattern.replace(/<custom-property>/g, '(--[\\w-]+)');
            pattern = pattern.replace(/<[^>]+>/g, '([\\w-]+)');
            
            return new RegExp('^' + pattern + '$');
        }

        // Extract values from template match
        function extractValues(template, twClass, match) {
            const values = {};
            const placeholders = template.match(/<[^>]+>/g) || [];
            
            // Map matched groups to placeholders
            for (let i = 0; i < placeholders.length; i++) {
                if (match[i + 1] !== undefined) {
                    values[placeholders[i]] = match[i + 1];
                }
            }
            
            return values;
        }

        // Convert CSS to Tailwind
        function convertCssToTailwind(cssInput) {
            const cssRules = parseCss(cssInput);
            const conversions = [];

            for (const rule of cssRules) {
                const matches = findTailwindMatches(rule);
                conversions.push({
                    original: rule.original,
                    property: rule.property,
                    value: rule.value,
                    matches: matches
                });
            }

            displayConversionResults(conversions);
        }

        // Parse CSS input
        function parseCss(cssInput) {
            const rules = [];
            const lines = cssInput.split(/[;\n]/);

            for (let line of lines) {
                line = line.trim();
                if (!line || line.startsWith('/*') || line.startsWith('//')) continue;

                const colonIndex = line.indexOf(':');
                if (colonIndex > 0) {
                    const property = line.substring(0, colonIndex).trim();
                    let value = line.substring(colonIndex + 1).trim();
                    
                    // Remove trailing semicolon
                    if (value.endsWith(';')) {
                        value = value.slice(0, -1).trim();
                    }

                    if (property && value) {
                        rules.push({
                            original: `${property}: ${value};`,
                            property: property,
                            value: value
                        });
                    }
                }
            }

            return rules;
        }

        // Find Tailwind matches for a CSS rule
        function findTailwindMatches(rule) {
            const matches = [];
            const targetStyle = `${rule.property}: ${rule.value};`;
            const normalized = normalizeCssStyle(targetStyle);

            // Direct exact match
            if (cssToTailwindMap[normalized]) {
                return cssToTailwindMap[normalized].map(tc => ({
                    tailwindClass: tc,
                    cssStyle: tailwindData[tc],
                    matchType: 'exact'
                }));
            }

            // Fuzzy matching
            for (const [tailwindClass, cssStyle] of Object.entries(tailwindData)) {
                const cssProp = cssStyle.split(':')[0].trim().toLowerCase();
                
                // Match by property name
                if (cssProp === rule.property.toLowerCase()) {
                    matches.push({
                        tailwindClass: tailwindClass,
                        cssStyle: cssStyle,
                        matchType: 'property'
                    });
                }
            }

            // Sort by relevance
            matches.sort((a, b) => {
                if (a.matchType === 'exact' && b.matchType !== 'exact') return -1;
                if (a.matchType !== 'exact' && b.matchType === 'exact') return 1;
                
                // Compare value similarity
                const aValue = a.cssStyle.split(':')[1] || '';
                const bValue = b.cssStyle.split(':')[1] || '';
                const aMatch = aValue.toLowerCase().includes(rule.value.toLowerCase());
                const bMatch = bValue.toLowerCase().includes(rule.value.toLowerCase());
                
                if (aMatch && !bMatch) return -1;
                if (!aMatch && bMatch) return 1;
                
                return 0;
            });

            return matches.slice(0, 10); // Limit to top 10 matches per rule
        }

        // Calculate match score
        function getMatchScore(query, tailwindClass, cssStyle) {
            const lowerTailwind = tailwindClass.toLowerCase();
            const lowerCss = cssStyle.toLowerCase();

            // Exact match (highest score)
            if (lowerTailwind === query) return 1000;
            
            // Check if query matches a complete word in tailwind class
            // For example, "px-4" should match "px-4" exactly, not "px-40"
            const words = lowerTailwind.split(/[\s\-/:]+/);
            const queryWords = query.split(/[\s\-/:]+/);
            
            // All query words match as complete segments
            let allWordsMatch = true;
            for (const qWord of queryWords) {
                if (!words.includes(qWord)) {
                    allWordsMatch = false;
                    break;
                }
            }
            if (allWordsMatch && queryWords.length > 0) return 950;
            
            if (lowerCss.includes(query + ':')) return 900;

            // Starts with (high score)
            if (lowerTailwind.startsWith(query)) return 800;
            if (lowerCss.startsWith(query)) return 700;

            // Contains (medium score)
            if (lowerTailwind.includes(query)) return 500;
            if (lowerCss.includes(query)) return 400;

            return 0;
        }

        // Display Tailwind to CSS results
        function displayTailwindToCssResults(conversions, originalClasses) {
            const container = document.getElementById('resultsContainer');
            const resultCount = document.getElementById('resultCount');

            if (conversions.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">è¯·è¾“å…¥Tailwindç±»å</h3>
                        <p class="text-gray-600">ä¾‹å¦‚ï¼špx-4 py-2 bg-pink-100</p>
                    </div>
                `;
                resultCount.textContent = '';
                return;
            }

            // Collect all CSS styles
            const allCssStyles = conversions
                .filter(c => c.cssStyle)
                .map(c => c.cssStyle);
            
            const foundCount = conversions.filter(c => c.cssStyle).length;
            const notFoundCount = conversions.length - foundCount;
            
            resultCount.textContent = `è½¬æ¢äº† ${conversions.length} ä¸ªç±»å (${foundCount} ä¸ªæˆåŠŸ${notFoundCount > 0 ? `, ${notFoundCount} ä¸ªæœªæ‰¾åˆ°` : ''})`;

            // Summary section with combined CSS
            let html = '';
            if (allCssStyles.length > 0) {
                const combinedCss = allCssStyles.join('\n');
                html += `
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-md p-6 fade-in border-2 border-blue-200">
                        <div class="flex items-start gap-3 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-blue-900 mb-2">è½¬æ¢åçš„ CSS æ ·å¼</h3>
                                <div class="flex items-start gap-2 max-w-[780px]">
                                    <pre class="flex-1 px-4 py-3 bg-white rounded-lg text-gray-800 font-mono text-sm overflow-x-auto border border-blue-200"><code>${escapeHtml(combinedCss)}</code></pre>
                                    <button onclick="copyToClipboard(\`${combinedCss.replace(/`/g, '\\`').replace(/\$/g, '\\$')}\`, event)" 
                                            class="p-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors flex-shrink-0" title="å¤åˆ¶å…¨éƒ¨">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Detailed conversion for each class
            html += conversions.map((conv, index) => {
                const hasMatch = conv.cssStyle !== null;
                
                return `
                    <div class="bg-white rounded-xl shadow-md p-5 fade-in" style="animation-delay: ${Math.min((index + 1) * 0.02, 0.5)}s">
                        <div class="flex items-start justify-between gap-4">
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-xs font-semibold text-gray-500 uppercase">Tailwind ç±»å</span>
                                </div>
                                <div class="mb-3">
                                    <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold">
                                        ${escapeHtml(conv.tailwindClass)}
                                    </span>
                                </div>
                                
                                ${hasMatch ? `
                                    <div>
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-xs font-semibold text-gray-500 uppercase">CSS æ ·å¼</span>
                                            <span class="text-xs px-2 py-0.5 rounded bg-green-100 text-green-700">
                                                å·²æ‰¾åˆ°
                                            </span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm flex-1 overflow-x-auto">
                                                ${escapeHtml(conv.cssStyle)}
                                            </code>
                                            <button onclick="copyToClipboard('${escapeHtml(conv.cssStyle).replace(/'/g, "\\'")}', event)" 
                                                    class="p-1.5 hover:bg-gray-200 rounded transition-colors flex-shrink-0" title="å¤åˆ¶">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                ` : `
                                    <div class="flex items-start gap-2 p-3 bg-amber-50 rounded-lg">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                        </svg>
                                        <div>
                                            <p class="text-sm font-semibold text-amber-800">æœªæ‰¾åˆ°åŒ¹é…</p>
                                            <p class="text-xs text-amber-700">è¯¥ç±»åå¯èƒ½ä¸å­˜åœ¨æˆ–ä½¿ç”¨äº†è‡ªå®šä¹‰é…ç½®</p>
                                        </div>
                                    </div>
                                `}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = html;
        }

        // Display conversion results
        function displayConversionResults(conversions) {
            const container = document.getElementById('resultsContainer');
            const resultCount = document.getElementById('resultCount');

            if (conversions.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">æ— æ³•è§£æCSS</h3>
                        <p class="text-gray-600">è¯·è¾“å…¥æœ‰æ•ˆçš„CSSæ ·å¼ï¼Œä¾‹å¦‚ï¼š<br>background-color: blue;<br>padding: 1rem;</p>
                    </div>
                `;
                resultCount.textContent = '';
                return;
            }

            // Collect all suggested classes
            const allClasses = conversions
                .filter(c => c.matches.length > 0)
                .map(c => c.matches[0].tailwindClass);
            
            resultCount.textContent = `è½¬æ¢äº† ${conversions.length} æ¡CSSè§„åˆ™`;

            // Summary section with combined classes
            let html = '';
            if (allClasses.length > 0) {
                html += `
                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl shadow-md p-6 fade-in border-2 border-green-200">
                        <div class="flex items-start gap-3 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-green-900 mb-2">æ¨èçš„ Tailwind ç±»ç»„åˆ</h3>
                                <div class="flex items-center gap-2">
                                    <code class="block px-4 py-3 bg-white rounded-lg text-gray-800 font-mono text-sm flex-1 overflow-x-auto border border-green-200">
                                        ${escapeHtml(allClasses.join(' '))}
                                    </code>
                                    <button onclick="copyToClipboard('${escapeHtml(allClasses.join(' ')).replace(/'/g, "\\'")}', event)" 
                                            class="p-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors flex-shrink-0" title="å¤åˆ¶å…¨éƒ¨">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            // Detailed conversion for each rule
            html += conversions.map((conv, index) => {
                const hasMatches = conv.matches.length > 0;
                const matchTypeLabel = hasMatches && conv.matches[0].matchType === 'exact' ? 'ç²¾ç¡®åŒ¹é…' : 'ç›¸ä¼¼åŒ¹é…';
                
                return `
                    <div class="bg-white rounded-xl shadow-md p-5 fade-in" style="animation-delay: ${Math.min((index + 1) * 0.02, 0.5)}s">
                        <div class="mb-3">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="text-xs font-semibold text-gray-500 uppercase">åŸå§‹ CSS</span>
                            </div>
                            <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm">
                                ${escapeHtml(conv.original)}
                            </code>
                        </div>
                        
                        ${hasMatches ? `
                            <div class="space-y-2">
                                <div class="flex items-center gap-2">
                                    <span class="text-xs font-semibold text-gray-500 uppercase">Tailwind ç±»å</span>
                                    <span class="text-xs px-2 py-0.5 rounded ${conv.matches[0].matchType === 'exact' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'}">
                                        ${matchTypeLabel}
                                    </span>
                                </div>
                                ${conv.matches.slice(0, 3).map(match => `
                                    <div class="result-item flex items-center gap-2 p-2 hover:bg-gray-50 rounded-lg transition-colors">
                                        <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold flex-1">
                                            ${escapeHtml(match.tailwindClass)}
                                        </span>
                                        <button onclick="copyToClipboard('${escapeHtml(match.tailwindClass).replace(/'/g, "\\'")}', event)" 
                                                class="copy-btn p-1.5 hover:bg-gray-200 rounded transition-colors" title="å¤åˆ¶">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                            </svg>
                                        </button>
                                    </div>
                                `).join('')}
                                ${conv.matches.length > 3 ? `
                                    <p class="text-xs text-gray-500 pl-2">è¿˜æœ‰ ${conv.matches.length - 3} ä¸ªç›¸ä¼¼ç»“æœ...</p>
                                ` : ''}
                            </div>
                        ` : `
                            <div class="flex items-start gap-2 p-3 bg-amber-50 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                </svg>
                                <div>
                                    <p class="text-sm font-semibold text-amber-800">æœªæ‰¾åˆ°åŒ¹é…</p>
                                    <p class="text-xs text-amber-700">å¯èƒ½éœ€è¦ä½¿ç”¨ä»»æ„å€¼è¯­æ³•ï¼š<code class="text-xs bg-amber-100 px-1 py-0.5 rounded">[${escapeHtml(conv.property)}:${escapeHtml(conv.value)}]</code></p>
                                </div>
                            </div>
                        `}
                    </div>
                `;
            }).join('');

            container.innerHTML = html;
        }

        // Display search results
        function displayResults(results, query) {
            const container = document.getElementById('resultsContainer');
            const resultCount = document.getElementById('resultCount');

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">æœªæ‰¾åˆ°ç»“æœ</h3>
                        <p class="text-gray-600">è¯•è¯•å…¶ä»–å…³é”®è¯ï¼Œæ¯”å¦‚ "flex"ã€"bg-" æˆ– "margin"</p>
                    </div>
                `;
                resultCount.textContent = '';
                return;
            }

            const total = results.length;
            const hasMore = total === 100;
            resultCount.textContent = hasMore ? `æ˜¾ç¤ºå‰ 100 æ¡ç»“æœ` : `æ‰¾åˆ° ${total} æ¡ç»“æœ`;

            const html = results.map((result, index) => `
                <div class="result-item bg-white rounded-xl shadow-md p-5 hover:shadow-lg fade-in" style="animation-delay: ${Math.min(index * 0.02, 0.5)}s">
                    <div class="flex items-start justify-between gap-4">
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold">
                                    ${escapeHtml(result.tailwindClass)}
                                </span>
                                <button onclick="copyToClipboard('${escapeHtml(result.tailwindClass).replace(/'/g, "\\'")}', event)" 
                                        class="copy-btn p-1.5 hover:bg-gray-100 rounded transition-colors" title="å¤åˆ¶">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                </button>
                            </div>
                            <div class="flex items-center gap-2">
                                <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm flex-1 overflow-x-auto">
                                    ${escapeHtml(result.cssStyle)}
                                </code>
                                <button onclick="copyToClipboard('${escapeHtml(result.cssStyle).replace(/'/g, "\\'")}', event)" 
                                        class="copy-btn p-1.5 hover:bg-gray-100 rounded transition-colors flex-shrink-0" title="å¤åˆ¶">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            container.innerHTML = html;
        }

        // Show welcome message
        function showWelcomeMessage() {
            document.getElementById('welcomeMessage').style.display = 'block';
            document.getElementById('resultsContainer').innerHTML = `
                <div id="welcomeMessage" class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">å¼€å§‹æœç´¢æˆ–è½¬æ¢</h3>
                    <p class="text-gray-600 mb-4">åœ¨ä¸Šæ–¹è¾“å…¥æ¡†ä¸­è¾“å…¥ Tailwind ç±»åæˆ– CSS å±æ€§æ¥æŸ¥æ‰¾å¯¹åº”çš„è½¬æ¢ç»“æœ</p>
                    <p class="text-sm text-gray-500 mb-6">ğŸ’¡ åˆ‡æ¢åˆ°"Tailwindè½¬CSS"å¯ä»¥å°†å¤šä¸ªTailwindç±»åè½¬æ¢ä¸ºCSSæ ·å¼<br>ğŸ’¡ åˆ‡æ¢åˆ°"CSSè½¬Tailwind"å¯ä»¥å°†CSSæ ·å¼è½¬æ¢ä¸ºTailwindç±»å</p>
                    
                    <div class="space-y-4">
                        <div>
                            <p class="text-xs font-semibold text-gray-500 uppercase mb-2">æœç´¢æ¨¡å¼ç¤ºä¾‹</p>
                            <div class="flex flex-wrap justify-center gap-2">
                                <button onclick="document.getElementById('searchInput').value='bg-blue-500'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm">
                                    bg-blue-500
                                </button>
                                <button onclick="document.getElementById('searchInput').value='flex'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm">
                                    flex
                                </button>
                                <button onclick="document.getElementById('searchInput').value='text-center'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm">
                                    text-center
                                </button>
                                <button onclick="document.getElementById('searchInput').value='margin'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                    margin
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <p class="text-xs font-semibold text-gray-500 uppercase mb-2">Tailwindè½¬CSSç¤ºä¾‹</p>
                            <div class="flex flex-wrap justify-center gap-2">
                                <button onclick="document.querySelectorAll('input[name=searchMode]')[1].checked=true; document.getElementById('searchInput').value='px-4 py-2 bg-pink-100'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                    è¯•è¯•Tailwindè½¬CSS
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <p class="text-xs font-semibold text-gray-500 uppercase mb-2">CSSè½¬Tailwindç¤ºä¾‹</p>
                            <div class="flex flex-wrap justify-center gap-2">
                                <button onclick="document.querySelectorAll('input[name=searchMode]')[2].checked=true; document.getElementById('searchInput').value='background-color: blue;\\npadding: 1rem;\\nmargin: 0.5rem;'; document.getElementById('searchInput').dispatchEvent(new Event('input'))" 
                                        class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm">
                                    è¯•è¯•CSSè½¬Tailwind
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('resultCount').textContent = '';
        }

        // Copy to clipboard
        async function copyToClipboard(text, event) {
            try {
                await navigator.clipboard.writeText(text);
                showTooltip('å·²å¤åˆ¶!', event);
            } catch (err) {
                console.error('Failed to copy:', err);
                showTooltip('å¤åˆ¶å¤±è´¥', event);
            }
        }

        // Show tooltip
        function showTooltip(message, event) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.textContent = message;
            tooltip.style.left = event.pageX + 'px';
            tooltip.style.top = (event.pageY - 30) + 'px';
            document.body.appendChild(tooltip);

            setTimeout(() => {
                tooltip.remove();
            }, 1500);
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Update placeholder based on mode
        function updatePlaceholder() {
            const mode = getCurrentMode();
            const searchInput = document.getElementById('searchInput');
            
            if (mode === 'tailwind-to-css') {
                searchInput.placeholder = 'è¾“å…¥ Tailwind ç±»ååºåˆ—ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼Œä¾‹å¦‚ï¼špx-4 py-2 bg-pink-100';
            } else if (mode === 'convert') {
                searchInput.placeholder = 'è¾“å…¥å¤šè¡Œ CSS æ ·å¼è¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚ï¼š\nbackground-color: blue;\npadding: 1rem;\nmargin: 0.5rem;';
            } else {
                searchInput.placeholder = 'è¾“å…¥ Tailwind ç±»å (å¦‚: bg-blue-500) æˆ– CSS å±æ€§ (å¦‚: background-color) è¿›è¡Œæœç´¢';
            }
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', debounce((e) => {
            processInput(e.target.value);
        }, 300));

        // Mode change listener
        document.querySelectorAll('input[name="searchMode"]').forEach(radio => {
            radio.addEventListener('change', () => {
                updatePlaceholder();
                const input = document.getElementById('searchInput').value;
                if (input.trim()) {
                    processInput(input);
                }
            });
        });

        // Initialize
        loadData();
    </script>
</body>
</html>

