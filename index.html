<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailwind CSS ⇄ CSS 转换器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        .result-item {
            transition: all 0.2s ease;
        }
        .result-item:hover {
            transform: translateX(4px);
        }
        .copy-btn {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        .result-item:hover .copy-btn {
            opacity: 1;
        }
        .tooltip {
            position: fixed;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            animation: fadeIn 0.2s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl" x-data="tailwindTranslator()" x-init="init()">
        <!-- Header -->
        <header class="text-center mb-12 fade-in">
            <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3">
                Tailwind CSS Translator
            </h1>
            <p class="text-gray-600 text-lg">双向转换 Tailwind CSS 类名与原生 CSS 样式</p>
        </header>

        <!-- Search Box -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-8 fade-in">
            <div class="relative">
                <textarea 
                    x-model="searchInput"
                    x-on:input.debounce.300ms="processInput()"
                    :placeholder="placeholder" 
                    class="w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none transition-colors resize-y min-h-[220px]"
                    rows="2"
                    autocomplete="off"
                ></textarea>
                <div class="absolute right-4 top-4 text-gray-400">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
            </div>
            
            <!-- Mode Selector -->
            <div class="flex items-center gap-4 mt-4">
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" x-model="searchMode" value="search" class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">搜索模式</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" x-model="searchMode" value="tailwind-to-css" class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">Tailwind转CSS</span>
                </label>
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="radio" x-model="searchMode" value="convert" class="w-4 h-4 text-indigo-600">
                    <span class="text-sm text-gray-700">CSS转Tailwind</span>
                </label>
            </div>
            
            <!-- Stats -->
            <div class="flex items-center justify-between mt-3 text-sm text-gray-500">
                <span x-text="statsInfo">加载中...</span>
                <span x-text="resultCount" class="font-semibold"></span>
            </div>
        </div>

        <!-- Results -->
        <div class="space-y-3">
            <!-- Welcome message -->
            <div x-show="showWelcome" class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">开始搜索或转换</h3>
                <p class="text-gray-600 mb-4">在上方输入框中输入 Tailwind 类名或 CSS 属性来查找对应的转换结果</p>
                <p class="text-sm text-gray-500 mb-6">💡 切换到"Tailwind转CSS"可以将多个Tailwind类名转换为CSS样式<br>💡 切换到"CSS转Tailwind"可以将CSS样式转换为Tailwind类名</p>
                
                <div class="space-y-4">
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">搜索模式示例</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button @click="setExample('search', 'bg-blue-500')" 
                                    class="px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm">
                                bg-blue-500
                            </button>
                            <button @click="setExample('search', 'flex')" 
                                    class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-colors text-sm">
                                flex
                            </button>
                            <button @click="setExample('search', 'text-center')" 
                                    class="px-4 py-2 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200 transition-colors text-sm">
                                text-center
                            </button>
                            <button @click="setExample('search', 'margin')" 
                                    class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                margin
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">Tailwind转CSS示例</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button @click="setExample('tailwind-to-css', 'px-4 py-2 bg-pink-100')" 
                                    class="px-4 py-2 bg-pink-100 text-pink-700 rounded-lg hover:bg-pink-200 transition-colors text-sm">
                                试试Tailwind转CSS
                            </button>
                        </div>
                    </div>
                    
                    <div>
                        <p class="text-xs font-semibold text-gray-500 uppercase mb-2">CSS转Tailwind示例</p>
                        <div class="flex flex-wrap justify-center gap-2">
                            <button @click="setExample('convert', 'background-color: blue;\\npadding: 1rem;\\nmargin: 0.5rem;')" 
                                    class="px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm">
                                试试CSS转Tailwind
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Dynamic Results -->
            <div x-show="!showWelcome && results.length === 0" class="bg-white rounded-xl shadow-md p-8 text-center fade-in">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h3 class="text-xl font-semibold text-gray-800 mb-2" x-text="emptyMessage.title"></h3>
                <p class="text-gray-600" x-html="emptyMessage.description"></p>
            </div>
            
            <!-- Search Results -->
            <template x-if="resultType === 'search' && results.length > 0">
                <div>
                    <template x-for="(result, index) in results" :key="result.tailwindClass">
                        <div class="result-item bg-white rounded-xl shadow-md p-5 hover:shadow-lg fade-in" 
                             :style="`animation-delay: ${Math.min(index * 0.02, 0.5)}s`">
                            <div class="flex items-start justify-between gap-4">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold" 
                                              x-text="result.tailwindClass"></span>
                                        <button @click="copyToClipboard(result.tailwindClass, $event)" 
                                                class="copy-btn p-1.5 hover:bg-gray-100 rounded transition-colors" title="复制">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                            </svg>
                                        </button>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm flex-1 overflow-x-auto" 
                                              x-text="result.cssStyle"></code>
                                        <button @click="copyToClipboard(result.cssStyle, $event)" 
                                                class="copy-btn p-1.5 hover:bg-gray-100 rounded transition-colors flex-shrink-0" title="复制">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
            
            <!-- Tailwind to CSS Results -->
            <template x-if="resultType === 'tailwind-to-css' && conversions.length > 0">
                <div class="space-y-3">
                    <!-- Summary -->
                    <div x-show="combinedCss" class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-md p-6 fade-in border-2 border-blue-200">
                        <div class="flex items-start gap-3 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-blue-900 mb-2">转换后的 CSS 样式</h3>
                                <div class="flex items-start gap-2 max-w-[780px]">
                                    <pre class="flex-1 px-4 py-3 bg-white rounded-lg text-gray-800 font-mono text-sm overflow-x-auto border border-blue-200"><code x-text="combinedCss"></code></pre>
                                    <button @click="copyToClipboard(combinedCss, $event)" 
                                            class="p-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg transition-colors flex-shrink-0" title="复制全部">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Details -->
                    <template x-for="(conv, index) in conversions" :key="index">
                        <div class="bg-white rounded-xl shadow-md p-5 fade-in" 
                             :style="`animation-delay: ${Math.min((index + 1) * 0.02, 0.5)}s`">
                            <div class="flex items-start justify-between gap-4">
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-xs font-semibold text-gray-500 uppercase">Tailwind 类名</span>
                                    </div>
                                    <div class="mb-3">
                                        <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold" 
                                              x-text="conv.tailwindClass"></span>
                                    </div>
                                    
                                    <template x-if="conv.cssStyle">
                                        <div>
                                            <div class="flex items-center gap-2 mb-2">
                                                <span class="text-xs font-semibold text-gray-500 uppercase">CSS 样式</span>
                                                <span class="text-xs px-2 py-0.5 rounded bg-green-100 text-green-700">已找到</span>
                                            </div>
                                            <div class="flex items-center gap-2">
                                                <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm flex-1 overflow-x-auto" 
                                                      x-text="conv.cssStyle"></code>
                                                <button @click="copyToClipboard(conv.cssStyle, $event)" 
                                                        class="p-1.5 hover:bg-gray-200 rounded transition-colors flex-shrink-0" title="复制">
                                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                    </template>
                                    
                                    <template x-if="!conv.cssStyle">
                                        <div class="flex items-start gap-2 p-3 bg-amber-50 rounded-lg">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                            </svg>
                                            <div>
                                                <p class="text-sm font-semibold text-amber-800">未找到匹配</p>
                                                <p class="text-xs text-amber-700">该类名可能不存在或使用了自定义配置</p>
                                            </div>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>
            
            <!-- CSS to Tailwind Results -->
            <template x-if="resultType === 'css-to-tailwind' && cssConversions.length > 0">
                <div class="space-y-3">
                    <!-- Summary -->
                    <div x-show="combinedClasses" class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl shadow-md p-6 fade-in border-2 border-green-200">
                        <div class="flex items-start gap-3 mb-3">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-green-900 mb-2">推荐的 Tailwind 类组合</h3>
                                <div class="flex items-center gap-2">
                                    <code class="block px-4 py-3 bg-white rounded-lg text-gray-800 font-mono text-sm flex-1 overflow-x-auto border border-green-200" 
                                          x-text="combinedClasses"></code>
                                    <button @click="copyToClipboard(combinedClasses, $event)" 
                                            class="p-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors flex-shrink-0" title="复制全部">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Details -->
                    <template x-for="(conv, index) in cssConversions" :key="index">
                        <div class="bg-white rounded-xl shadow-md p-5 fade-in" 
                             :style="`animation-delay: ${Math.min((index + 1) * 0.02, 0.5)}s`">
                            <div class="mb-3">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="text-xs font-semibold text-gray-500 uppercase">原始 CSS</span>
                                </div>
                                <code class="block px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-sm" 
                                      x-text="conv.original"></code>
                            </div>
                            
                            <template x-if="conv.matches.length > 0">
                                <div class="space-y-2">
                                    <div class="flex items-center gap-2">
                                        <span class="text-xs font-semibold text-gray-500 uppercase">Tailwind 类名</span>
                                        <span class="text-xs px-2 py-0.5 rounded" 
                                              :class="conv.matches[0].matchType === 'exact' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700'"
                                              x-text="conv.matches[0].matchType === 'exact' ? '精确匹配' : '相似匹配'"></span>
                                    </div>
                                    <template x-for="(match, mIndex) in conv.matches.slice(0, 3)" :key="mIndex">
                                        <div class="result-item flex items-center gap-2 p-2 hover:bg-gray-50 rounded-lg transition-colors">
                                            <span class="inline-block px-3 py-1 bg-indigo-100 text-indigo-700 rounded-lg font-mono text-sm font-semibold flex-1" 
                                                  x-text="match.tailwindClass"></span>
                                            <button @click="copyToClipboard(match.tailwindClass, $event)" 
                                                    class="copy-btn p-1.5 hover:bg-gray-200 rounded transition-colors" title="复制">
                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                                                </svg>
                                            </button>
                                        </div>
                                    </template>
                                    <p x-show="conv.matches.length > 3" class="text-xs text-gray-500 pl-2" 
                                       x-text="`还有 ${conv.matches.length - 3} 个相似结果...`"></p>
                                </div>
                            </template>
                            
                            <template x-if="conv.matches.length === 0">
                                <div class="flex items-start gap-2 p-3 bg-amber-50 rounded-lg">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-amber-500 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                                    </svg>
                                    <div>
                                        <p class="text-sm font-semibold text-amber-800">未找到匹配</p>
                                        <p class="text-xs text-amber-700">可能需要使用任意值语法：<code class="text-xs bg-amber-100 px-1 py-0.5 rounded" x-text="`[${conv.property}:${conv.value}]`"></code></p>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </template>
                </div>
            </template>
        </div>

        <!-- Footer -->
        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>Made with ❤️ using Tailwind CSS</p>
        </footer>
    </div>

    <script>
        function tailwindTranslator() {
            return {
                // State
                tailwindData: {},
                cssToTailwindMap: {},
                isLoading: true,
                searchInput: '',
                searchMode: 'search',
                statsInfo: '加载中...',
                resultCount: '',
                showWelcome: true,
                resultType: '',
                results: [],
                conversions: [],
                cssConversions: [],
                combinedCss: '',
                combinedClasses: '',
                emptyMessage: { title: '', description: '' },
                
                // Computed property for placeholder
                get placeholder() {
                    if (this.searchMode === 'tailwind-to-css') {
                        return '输入 Tailwind 类名序列（空格分隔），例如：px-4 py-2 bg-pink-100';
                    } else if (this.searchMode === 'convert') {
                        return '输入多行 CSS 样式进行转换，例如：\nbackground-color: blue;\npadding: 1rem;\nmargin: 0.5rem;';
                    } else {
                        return '输入 Tailwind 类名 (如: bg-blue-500) 或 CSS 属性 (如: background-color) 进行搜索';
                    }
                },
                
                // Watch searchMode changes
                init() {
                    this.loadData();
                    this.$watch('searchMode', () => {
                        if (this.searchInput.trim()) {
                            this.processInput();
                        }
                    });
                },
                
                // Load JSON data
                async loadData() {
                    try {
                        const response = await fetch('tailwind-classes-style-map.json');
                        this.tailwindData = await response.json();
                        
                        // Build reverse mapping (CSS -> Tailwind)
                        for (const [tailwindClass, cssStyle] of Object.entries(this.tailwindData)) {
                            const normalized = this.normalizeCssStyle(cssStyle);
                            if (!this.cssToTailwindMap[normalized]) {
                                this.cssToTailwindMap[normalized] = [];
                            }
                            this.cssToTailwindMap[normalized].push(tailwindClass);
                        }
                        
                        const count = Object.keys(this.tailwindData).length;
                        this.statsInfo = `已加载 ${count.toLocaleString()} 条 Tailwind 类映射`;
                        this.isLoading = false;
                    } catch (error) {
                        this.statsInfo = '加载数据失败，请刷新页面重试';
                        console.error('Error loading data:', error);
                    }
                },

                // Normalize CSS style for comparison
                normalizeCssStyle(css) {
                    return css
                        .toLowerCase()
                        .replace(/\s+/g, ' ')
                        .replace(/\/\*.*?\*\//g, '')
                        .trim();
                },
                
                // Set example
                setExample(mode, text) {
                    this.searchMode = mode;
                    this.searchInput = text;
                    this.processInput();
                },

                // Main processing function
                processInput() {
                    if (!this.searchInput.trim() || this.isLoading) {
                        this.showWelcome = true;
                        this.resultCount = '';
                        return;
                    }

                    this.showWelcome = false;
                    
                    if (this.searchMode === 'convert') {
                        this.convertCssToTailwind();
                    } else if (this.searchMode === 'tailwind-to-css') {
                        this.convertTailwindToCSS();
                    } else {
                        this.search();
                    }
                },

                // Search function
                search() {
                    const results = [];
                    const lowerQuery = this.searchInput.toLowerCase().trim();

                    // Search in both keys and values
                    for (const [tailwindClass, cssStyle] of Object.entries(this.tailwindData)) {
                        const matchScore = this.getMatchScore(lowerQuery, tailwindClass, cssStyle);
                        if (matchScore > 0) {
                            results.push({ tailwindClass, cssStyle, score: matchScore });
                        }
                    }

                    // Sort by score (higher is better)
                    results.sort((a, b) => b.score - a.score);

                    // Limit results to top 100 for performance
                    this.results = results.slice(0, 100);
                    this.resultType = 'search';
                    
                    if (this.results.length === 0) {
                        this.emptyMessage = {
                            title: '未找到结果',
                            description: '试试其他关键词，比如 "flex"、"bg-" 或 "margin"'
                        };
                    }
                    
                    const total = this.results.length;
                    const hasMore = total === 100;
                    this.resultCount = hasMore ? `显示前 100 条结果` : `找到 ${total} 条结果`;
                },

                // Convert Tailwind to CSS
                convertTailwindToCSS() {
                    // Split by whitespace and filter out empty strings
                    const tailwindClasses = this.searchInput.trim().split(/\s+/).filter(c => c.length > 0);
                    
                    if (tailwindClasses.length === 0) {
                        this.resultType = 'tailwind-to-css';
                        this.conversions = [];
                        this.combinedCss = '';
                        this.emptyMessage = {
                            title: '请输入Tailwind类名',
                            description: '例如：px-4 py-2 bg-pink-100'
                        };
                        this.resultCount = '';
                        return;
                    }

                    this.conversions = [];
                    for (const twClass of tailwindClasses) {
                        // First try exact match
                        let cssStyle = this.tailwindData[twClass];
                        
                        // If no exact match, try template matching
                        if (!cssStyle) {
                            const templateMatch = this.findTemplateMatch(twClass);
                            if (templateMatch) {
                                cssStyle = templateMatch;
                            }
                        }
                        
                        this.conversions.push({
                            tailwindClass: twClass,
                            cssStyle: cssStyle || null
                        });
                    }

                    this.resultType = 'tailwind-to-css';
                    
                    // Collect all CSS styles
                    const allCssStyles = this.conversions
                        .filter(c => c.cssStyle)
                        .map(c => c.cssStyle);
                    
                    this.combinedCss = allCssStyles.join('\n');
                    
                    const foundCount = this.conversions.filter(c => c.cssStyle).length;
                    const notFoundCount = this.conversions.length - foundCount;
                    
                    this.resultCount = `转换了 ${this.conversions.length} 个类名 (${foundCount} 个成功${notFoundCount > 0 ? `, ${notFoundCount} 个未找到` : ''})`;
                },

                // Find template match for a Tailwind class
                findTemplateMatch(twClass) {
                    // Try to match against template patterns in tailwindData
                    for (const [template, cssTemplate] of Object.entries(this.tailwindData)) {
                        // Check if template contains placeholders
                        if (template.includes('<') && template.includes('>')) {
                            const regex = this.templateToRegex(template);
                            const match = twClass.match(regex);
                            
                            if (match) {
                                // Extract the values from the match
                                const values = this.extractValues(template, twClass, match);
                                
                                // Replace placeholders in CSS template
                                let result = cssTemplate;
                                for (const [placeholder, value] of Object.entries(values)) {
                                    result = result.replace(new RegExp(placeholder.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g'), value);
                                }
                                
                                return result;
                            }
                        }
                    }
                    
                    return null;
                },

                // Convert template pattern to regex
                templateToRegex(template) {
                    // Escape special regex characters except < and >
                    let pattern = template.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    
                    // Replace common placeholders with regex patterns
                    pattern = pattern.replace(/<number>/g, '(\\d+(?:\\.\\d+)?)');
                    pattern = pattern.replace(/<ratio>/g, '([\\d\\.]+(?:\\/[\\d\\.]+)?)');
                    pattern = pattern.replace(/<value>/g, '(.+?)');
                    pattern = pattern.replace(/<custom-property>/g, '(--[\\w-]+)');
                    pattern = pattern.replace(/<[^>]+>/g, '([\\w-]+)');
                    
                    return new RegExp('^' + pattern + '$');
                },

                // Extract values from template match
                extractValues(template, twClass, match) {
                    const values = {};
                    const placeholders = template.match(/<[^>]+>/g) || [];
                    
                    // Map matched groups to placeholders
                    for (let i = 0; i < placeholders.length; i++) {
                        if (match[i + 1] !== undefined) {
                            values[placeholders[i]] = match[i + 1];
                        }
                    }
                    
                    return values;
                },

                // Convert CSS to Tailwind
                convertCssToTailwind() {
                    const cssRules = this.parseCss(this.searchInput);
                    
                    if (cssRules.length === 0) {
                        this.resultType = 'css-to-tailwind';
                        this.cssConversions = [];
                        this.combinedClasses = '';
                        this.emptyMessage = {
                            title: '无法解析CSS',
                            description: '请输入有效的CSS样式，例如：<br>background-color: blue;<br>padding: 1rem;'
                        };
                        this.resultCount = '';
                        return;
                    }

                    this.cssConversions = [];
                    for (const rule of cssRules) {
                        const matches = this.findTailwindMatches(rule);
                        this.cssConversions.push({
                            original: rule.original,
                            property: rule.property,
                            value: rule.value,
                            matches: matches
                        });
                    }

                    this.resultType = 'css-to-tailwind';
                    
                    // Collect all suggested classes
                    const allClasses = this.cssConversions
                        .filter(c => c.matches.length > 0)
                        .map(c => c.matches[0].tailwindClass);
                    
                    this.combinedClasses = allClasses.join(' ');
                    this.resultCount = `转换了 ${this.cssConversions.length} 条CSS规则`;
                },

                // Parse CSS input
                parseCss(cssInput) {
                    const rules = [];
                    const lines = cssInput.split(/[;\n]/);

                    for (let line of lines) {
                        line = line.trim();
                        if (!line || line.startsWith('/*') || line.startsWith('//')) continue;

                        const colonIndex = line.indexOf(':');
                        if (colonIndex > 0) {
                            const property = line.substring(0, colonIndex).trim();
                            let value = line.substring(colonIndex + 1).trim();
                            
                            // Remove trailing semicolon
                            if (value.endsWith(';')) {
                                value = value.slice(0, -1).trim();
                            }

                            if (property && value) {
                                rules.push({
                                    original: `${property}: ${value};`,
                                    property: property,
                                    value: value
                                });
                            }
                        }
                    }

                    return rules;
                },

                // Find Tailwind matches for a CSS rule
                findTailwindMatches(rule) {
                    const matches = [];
                    const targetStyle = `${rule.property}: ${rule.value};`;
                    const normalized = this.normalizeCssStyle(targetStyle);

                    // Direct exact match
                    if (this.cssToTailwindMap[normalized]) {
                        return this.cssToTailwindMap[normalized].map(tc => ({
                            tailwindClass: tc,
                            cssStyle: this.tailwindData[tc],
                            matchType: 'exact'
                        }));
                    }

                    // Fuzzy matching
                    for (const [tailwindClass, cssStyle] of Object.entries(this.tailwindData)) {
                        const cssProp = cssStyle.split(':')[0].trim().toLowerCase();
                        
                        // Match by property name
                        if (cssProp === rule.property.toLowerCase()) {
                            matches.push({
                                tailwindClass: tailwindClass,
                                cssStyle: cssStyle,
                                matchType: 'property'
                            });
                        }
                    }

                    // Sort by relevance
                    matches.sort((a, b) => {
                        if (a.matchType === 'exact' && b.matchType !== 'exact') return -1;
                        if (a.matchType !== 'exact' && b.matchType === 'exact') return 1;
                        
                        // Compare value similarity
                        const aValue = a.cssStyle.split(':')[1] || '';
                        const bValue = b.cssStyle.split(':')[1] || '';
                        const aMatch = aValue.toLowerCase().includes(rule.value.toLowerCase());
                        const bMatch = bValue.toLowerCase().includes(rule.value.toLowerCase());
                        
                        if (aMatch && !bMatch) return -1;
                        if (!aMatch && bMatch) return 1;
                        
                        return 0;
                    });

                    return matches.slice(0, 10); // Limit to top 10 matches per rule
                },

                // Calculate match score
                getMatchScore(query, tailwindClass, cssStyle) {
                    const lowerTailwind = tailwindClass.toLowerCase();
                    const lowerCss = cssStyle.toLowerCase();

                    // Exact match (highest score)
                    if (lowerTailwind === query) return 1000;
                    
                    // Check if query matches a complete word in tailwind class
                    // For example, "px-4" should match "px-4" exactly, not "px-40"
                    const words = lowerTailwind.split(/[\s\-/:]+/);
                    const queryWords = query.split(/[\s\-/:]+/);
                    
                    // All query words match as complete segments
                    let allWordsMatch = true;
                    for (const qWord of queryWords) {
                        if (!words.includes(qWord)) {
                            allWordsMatch = false;
                            break;
                        }
                    }
                    if (allWordsMatch && queryWords.length > 0) return 950;
                    
                    if (lowerCss.includes(query + ':')) return 900;

                    // Starts with (high score)
                    if (lowerTailwind.startsWith(query)) return 800;
                    if (lowerCss.startsWith(query)) return 700;

                    // Contains (medium score)
                    if (lowerTailwind.includes(query)) return 500;
                    if (lowerCss.includes(query)) return 400;

                    return 0;
                },
                
                // Copy to clipboard
                async copyToClipboard(text, event) {
                    try {
                        await navigator.clipboard.writeText(text);
                        this.showTooltip('已复制!', event);
                    } catch (err) {
                        console.error('Failed to copy:', err);
                        this.showTooltip('复制失败', event);
                    }
                },
                
                // Show tooltip
                showTooltip(message, event) {
                    const tooltip = document.createElement('div');
                    tooltip.className = 'tooltip';
                    tooltip.textContent = message;
                    tooltip.style.left = event.pageX + 'px';
                    tooltip.style.top = (event.pageY - 30) + 'px';
                    document.body.appendChild(tooltip);

                    setTimeout(() => {
                        tooltip.remove();
                    }, 1500);
                }
            };
        }
    </script>
</body>
</html>

